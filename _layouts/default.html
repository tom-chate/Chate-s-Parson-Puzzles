<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    {%- include parsons-scripts.html -%}
    {% if site.google_analytics %}
      <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
      </script>
    {% endif %}

    <meta charset="UTF-8">
    {% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    >
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Jekyll-compiled CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  </head>

  <body>
    <!-- Navbar always at top -->
     <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
  <div class="container-fluid">

    <!-- Brand -->
    <a class="navbar-brand fw-bold d-flex align-items-center gap-2"
       href="{{ '/' | relative_url }}">
      <i class="bi bi-house-fill"></i>
      Edu-Chate
    </a>

    <button class="navbar-toggler" type="button"
      data-bs-toggle="collapse"
      data-bs-target="#mainNavbar"
      aria-controls="mainNavbar"
      aria-expanded="false"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNavbar">

      <!-- LEFT side nav -->
      <ul class="navbar-nav ms-3 me-auto">

        <!-- Parson Puzzles dropdown -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"
             href="#"
             id="puzzlesDropdown"
             role="button"
             data-bs-toggle="dropdown"
             aria-expanded="false">
             <i class="bi bi-cpu"></i> Parson Puzzles
          </a>

          <!-- Category level -->
          <ul class="dropdown-menu" aria-labelledby="puzzlesDropdown">
            {% assign grouped = site.data.tasks | group_by: "category" %}
            {% for group in grouped %}
              <li class="dropdown-submenu dropend">
                <a class="dropdown-item dropdown-toggle"
                   href="#">
                  {{ group.name }}
                </a>

                <!-- Tasks for this category -->
                <ul class="dropdown-menu">
                  {% for task in group.items %}
                    {% assign task_url = '/parsons/' | append: task.slug | append: '.html' %}
                    <li>
                      <a class="dropdown-item{% if page.url == task_url %} active{% endif %}"
                         href="{{ task_url | relative_url }}">
                        {{ task.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </li>

      </ul>

      <!-- Right side -->
      <span class="navbar-text small">
        {{ page.title | default: site.title }}
      </span>
    </div>
  </div>
</nav>




    <!-- Page header with ID for overlay script -->
    <!-- Main content in the middle -->
    <main id="content" class="main-content container" role="main">
      {{ content }}
    </main>

    <!-- Footer as sibling of <main>, so flex/footer CSS works -->
<footer class="site-footer">
  <div class="footer-inner">
    <small>Â© {{ site.time | date: "%Y" }} Edu-Chate</small>

    <div class="footer-actions">
      <a
        href="https://www.youtube.com/@edu-chate"
        target="_blank"
        rel="noopener"
        class="footer-link me-2"
      >
        <i class="bi bi-youtube"></i> YouTube
      </a>

      <button id="overlayToggle">
        ðŸŽ¨ Change overlay
      </button>
    </div>
  </div>
</footer>

    <!-- Bootstrap JS bundle (includes Popper) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Overlay toggle script -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const header = document.getElementById("pageHeader");
        const button = document.getElementById("overlayToggle");
        if (!header || !button) return;

        const overlays = ["overlay-1", "overlay-2", "overlay-3"];

        function getCurrentIndex() {
          return overlays.findIndex(c => header.classList.contains(c));
        }

        button.addEventListener("click", function () {
          let idx = getCurrentIndex();
          if (idx === -1) idx = 0;

          header.classList.remove(overlays[idx]);
          const nextIdx = (idx + 1) % overlays.length;
          header.classList.add(overlays[nextIdx]);
        });
      });
    </script>
  </body>
</html>
